<!-- Modal wrapper -->
<div
  *ngIf="showModal"
  class="fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center">
  <!-- Modal box -->
  <div class="relative bg-white p-6 rounded-lg w-full max-w-sm shadow-lg">
    <h2 class="text-lg font-bold mb-4 text-center">
      {{ step === 1 ? "Reset Your Password" : "Verify OTP" }}
    </h2>

    <!-- Step 1: Email Input -->
    <div *ngIf="step === 1" class="space-y-4">
      <input
        type="email"
        [(ngModel)]="email"
        placeholder="Enter your email"
        class="w-full border p-2 rounded" />
      <button
        (click)="sendEmail()"
        class="w-full bg-blue-600 text-white p-2 rounded">
        Send OTP
      </button>
    </div>

    <!-- Step 2: OTP & Password -->
    <div *ngIf="step === 2" class="space-y-4">
      <input
        type="text"
        [(ngModel)]="otp"
        placeholder="Enter OTP"
        class="w-full border p-2 rounded" />

      <!-- New Password -->
      <div class="relative">
        <input
          [type]="showPassword ? 'text' : 'password'"
          [(ngModel)]="newPassword"
          placeholder="New Password"
          class="w-full border p-2 rounded pr-10" />
        <i
          class="fas absolute top-3 right-3 cursor-pointer"
          [ngClass]="showPassword ? 'fa-eye-slash' : 'fa-eye'"
          (click)="togglePassword()"></i>
      </div>

      <!-- Confirm Password -->
      <div class="relative">
        <input
          [type]="showConfirmPassword ? 'text' : 'password'"
          [(ngModel)]="confirmPassword"
          placeholder="Confirm Password"
          class="w-full border p-2 rounded pr-10" />
        <i
          class="fas absolute top-3 right-3 cursor-pointer"
          [ngClass]="showConfirmPassword ? 'fa-eye-slash' : 'fa-eye'"
          (click)="toggleConfirmPassword()"></i>
      </div>

      <!-- Error message -->
      <p *ngIf="passwordMismatch" class="text-red-600 text-sm">
        Passwords do not match!
      </p>

      <button
        (click)="verifyOtp()"
        class="w-full bg-green-600 text-white p-2 rounded">
        Verify OTP
      </button>
    </div>

    <!-- Close button -->
    <button
      class="absolute top-2 right-3 text-xl cursor-pointer"
      (click)="closeModal()">
      Ã—
    </button>
  </div>
</div>
